ubind @mega
sensor firing_distance @unit @range
sensor unit_current_health @unit @health
sensor unit_maximal_health @unit @maxHealth
jump 27 notEqual unit_current_health unit_maximal_health
ulocate damaged core true @copper damaged_x damaged_y found building
jump 27 equal found false
sensor building_is_broken building @dead
jump 27 equal building_is_broken true
set base_x 268
set base_y 37
op sub difference_x damaged_x base_x
op sub difference_y damaged_y base_y
op pow summand_one difference_x 2
op pow summand_two difference_y 2
op add distance_from_base summand_one summand_two
op sqrt distance_from_base distance_from_base b
jump 27 greaterThan distance_from_base 70
ucontrol within damaged_x damaged_y firing_distance within 0
jump 22 equal within true
ucontrol approach damaged_x damaged_y firing_distance 0 0
end
sensor building_current_health building @health
sensor building_maximal_health building @maxHealth
jump 27 equal building_current_health building_maximal_health
ucontrol target damaged_x damaged_y true 0 0
end
ucontrol unbind 0 0 0 0 0